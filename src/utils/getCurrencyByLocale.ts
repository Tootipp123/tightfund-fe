export const currencyMap: Record<
  string,
  { country: string; currency: string; symbol: string }
> = {
  AT: { country: "Austria", currency: "EUR", symbol: "€" },
  AZ: { country: "Azerbaijan", currency: "AZN", symbol: "₼" },
  BH: { country: "Bahrain", currency: "BHD", symbol: ".د.ب" },
  BG: { country: "Bulgaria", currency: "BGN", symbol: "лв" },
  CM: { country: "Cameroon", currency: "XAF", symbol: "FCFA" },
  HR: { country: "Croatia", currency: "EUR", symbol: "€" },
  CU: { country: "Cuba", currency: "CUP", symbol: "$" },
  DO: { country: "Dominican Republic", currency: "DOP", symbol: "RD$" },
  ET: { country: "Ethiopia", currency: "ETB", symbol: "Br" },
  GE: { country: "Georgia", currency: "GEL", symbol: "₾" },
  GH: { country: "Ghana", currency: "GHS", symbol: "₵" },
  GT: { country: "Guatemala", currency: "GTQ", symbol: "Q" },
  IS: { country: "Iceland", currency: "ISK", symbol: "kr" },
  IQ: { country: "Iraq", currency: "IQD", symbol: "ع.د" },
  JO: { country: "Jordan", currency: "JOD", symbol: "د.ا" },
  KZ: { country: "Kazakhstan", currency: "KZT", symbol: "₸" },
  KW: { country: "Kuwait", currency: "KWD", symbol: "د.ك" },
  MA: { country: "Morocco", currency: "MAD", symbol: "د.م." },
  OM: { country: "Oman", currency: "OMR", symbol: "ر.ع." },
  TN: { country: "Tunisia", currency: "TND", symbol: "د.ت" },
  US: { country: "United States", currency: "USD", symbol: "$" },
  PH: { country: "Philippines", currency: "PHP", symbol: "₱" },
  IN: { country: "India", currency: "INR", symbol: "₹" },
  JP: { country: "Japan", currency: "JPY", symbol: "¥" },
  DE: { country: "Germany", currency: "EUR", symbol: "€" },
  FR: { country: "France", currency: "EUR", symbol: "€" },
  CA: { country: "Canada", currency: "CAD", symbol: "$" },
  GB: { country: "United Kingdom", currency: "GBP", symbol: "£" },
  AU: { country: "Australia", currency: "AUD", symbol: "$" },
  SG: { country: "Singapore", currency: "SGD", symbol: "$" },
  BR: { country: "Brazil", currency: "BRL", symbol: "R$" },
  MX: { country: "Mexico", currency: "MXN", symbol: "$" },
  KR: { country: "South Korea", currency: "KRW", symbol: "₩" },
  NG: { country: "Nigeria", currency: "NGN", symbol: "₦" },
  ZA: { country: "South Africa", currency: "ZAR", symbol: "R" },
  RU: { country: "Russia", currency: "RUB", symbol: "₽" },
  SA: { country: "Saudi Arabia", currency: "SAR", symbol: "ر.س" },
  TH: { country: "Thailand", currency: "THB", symbol: "฿" },
  CH: { country: "Switzerland", currency: "CHF", symbol: "CHF" },
  SE: { country: "Sweden", currency: "SEK", symbol: "kr" },
  AR: { country: "Argentina", currency: "ARS", symbol: "$" },
  BD: { country: "Bangladesh", currency: "BDT", symbol: "৳" },
  BE: { country: "Belgium", currency: "EUR", symbol: "€" },
  CL: { country: "Chile", currency: "CLP", symbol: "$" },
  CO: { country: "Colombia", currency: "COP", symbol: "$" },
  CZ: { country: "Czech Republic", currency: "CZK", symbol: "Kč" },
  CN: { country: "China", currency: "CNY", symbol: "¥" },
  DK: { country: "Denmark", currency: "DKK", symbol: "kr" },
  EG: { country: "Egypt", currency: "EGP", symbol: "£" },
  FI: { country: "Finland", currency: "EUR", symbol: "€" },
  GR: { country: "Greece", currency: "EUR", symbol: "€" },
  HK: { country: "Hong Kong", currency: "HKD", symbol: "HK$" },
  HU: { country: "Hungary", currency: "HUF", symbol: "Ft" },
  ID: { country: "Indonesia", currency: "IDR", symbol: "Rp" },
  IL: { country: "Israel", currency: "ILS", symbol: "₪" },
  IT: { country: "Italy", currency: "EUR", symbol: "€" },
  KE: { country: "Kenya", currency: "KES", symbol: "KSh" },
  MY: { country: "Malaysia", currency: "MYR", symbol: "RM" },
  NL: { country: "Netherlands", currency: "EUR", symbol: "€" },
  NO: { country: "Norway", currency: "NOK", symbol: "kr" },
  NZ: { country: "New Zealand", currency: "NZD", symbol: "$" },
  PK: { country: "Pakistan", currency: "PKR", symbol: "₨" },
  PL: { country: "Poland", currency: "PLN", symbol: "zł" },
  PT: { country: "Portugal", currency: "EUR", symbol: "€" },
  QA: { country: "Qatar", currency: "QAR", symbol: "ر.ق" },
  RO: { country: "Romania", currency: "RON", symbol: "lei" },
  ES: { country: "Spain", currency: "EUR", symbol: "€" },
  LK: { country: "Sri Lanka", currency: "LKR", symbol: "Rs" },
  TW: { country: "Taiwan", currency: "TWD", symbol: "NT$" },
  TR: { country: "Turkey", currency: "TRY", symbol: "₺" },
  UA: { country: "Ukraine", currency: "UAH", symbol: "₴" },
  AE: { country: "United Arab Emirates", currency: "AED", symbol: "د.إ" },
  VN: { country: "Vietnam", currency: "VND", symbol: "₫" },
  AL: { country: "Albania", currency: "ALL", symbol: "L" },
  AM: { country: "Armenia", currency: "AMD", symbol: "֏" },
  AO: { country: "Angola", currency: "AOA", symbol: "Kz" },
  BA: { country: "Bosnia and Herzegovina", currency: "BAM", symbol: "KM" },
  BF: { country: "Burkina Faso", currency: "XOF", symbol: "Fr" },
  BJ: { country: "Benin", currency: "XOF", symbol: "Fr" },
  BN: { country: "Brunei", currency: "BND", symbol: "$" },
  BO: { country: "Bolivia", currency: "BOB", symbol: "Bs." },
  BW: { country: "Botswana", currency: "BWP", symbol: "P" },
  CF: { country: "Central African Republic", currency: "XAF", symbol: "Fr" },
  CG: { country: "Republic of the Congo", currency: "XAF", symbol: "Fr" },
  CR: { country: "Costa Rica", currency: "CRC", symbol: "₡" },
  CY: { country: "Cyprus", currency: "EUR", symbol: "€" },
  DJ: { country: "Djibouti", currency: "DJF", symbol: "Fdj" },
  DM: { country: "Dominica", currency: "XCD", symbol: "EC$" },
  FJ: { country: "Fiji", currency: "FJD", symbol: "$" },
  GA: { country: "Gabon", currency: "XAF", symbol: "FCFA" },
  GM: { country: "Gambia", currency: "GMD", symbol: "D" },
  GY: { country: "Guyana", currency: "GYD", symbol: "$" },
  AG: { country: "Antigua and Barbuda", currency: "XCD", symbol: "EC$" },
  BB: { country: "Barbados", currency: "BBD", symbol: "$" },
  BZ: { country: "Belize", currency: "BZD", symbol: "$" },
  BT: { country: "Bhutan", currency: "BTN", symbol: "Nu." },
  CV: { country: "Cape Verde", currency: "CVE", symbol: "$" },
  ER: { country: "Eritrea", currency: "ERN", symbol: "Nfk" },
  GN: { country: "Guinea", currency: "GNF", symbol: "FG" },
  GW: { country: "Guinea-Bissau", currency: "XOF", symbol: "CFA" },
  HT: { country: "Haiti", currency: "HTG", symbol: "G" },
  KI: { country: "Kiribati", currency: "AUD", symbol: "$" },
  LA: { country: "Laos", currency: "LAK", symbol: "₭" },
  LR: { country: "Liberia", currency: "LRD", symbol: "$" },
  LS: { country: "Lesotho", currency: "LSL", symbol: "M" },
  MG: { country: "Madagascar", currency: "MGA", symbol: "Ar" },
  MH: { country: "Marshall Islands", currency: "USD", symbol: "$" },
  MM: { country: "Myanmar (Burma)", currency: "MMK", symbol: "K" },
  NR: { country: "Nauru", currency: "AUD", symbol: "$" },
  NE: { country: "Niger", currency: "XOF", symbol: "CFA" },
  PG: { country: "Papua New Guinea", currency: "PGK", symbol: "K" },
  RW: { country: "Rwanda", currency: "RWF", symbol: "FRw" },
  AD: { country: "Andorra", currency: "EUR", symbol: "€" },
  BI: { country: "Burundi", currency: "BIF", symbol: "FBu" },
  CK: { country: "Cook Islands", currency: "NZD", symbol: "$" },
  DZ: { country: "Algeria", currency: "DZD", symbol: "د.ج" },
  FM: { country: "Micronesia", currency: "USD", symbol: "$" },
  GD: { country: "Grenada", currency: "XCD", symbol: "EC$" },
  GL: { country: "Greenland", currency: "DKK", symbol: "kr" },
  GU: { country: "Guam", currency: "USD", symbol: "$" },
  IR: { country: "Iran", currency: "IRR", symbol: "﷼" },
  KN: { country: "Saint Kitts and Nevis", currency: "XCD", symbol: "EC$" },
  LC: { country: "Saint Lucia", currency: "XCD", symbol: "EC$" },
  LI: { country: "Liechtenstein", currency: "CHF", symbol: "CHF" },
  LU: { country: "Luxembourg", currency: "EUR", symbol: "€" },
  MC: { country: "Monaco", currency: "EUR", symbol: "€" },
  ME: { country: "Montenegro", currency: "EUR", symbol: "€" },
  MF: { country: "Saint Martin", currency: "EUR", symbol: "€" },
  ML: { country: "Mali", currency: "XOF", symbol: "CFA" },
  MN: { country: "Mongolia", currency: "MNT", symbol: "₮" },
  MO: { country: "Macau", currency: "MOP", symbol: "MOP$" },
  MZ: { country: "Mozambique", currency: "MZN", symbol: "MT" },
  NA: { country: "Namibia", currency: "NAD", symbol: "$" },
  NC: { country: "New Caledonia", currency: "XPF", symbol: "₣" },
  NI: { country: "Nicaragua", currency: "NIO", symbol: "C$" },
  PA: { country: "Panama", currency: "PAB", symbol: "B/." },
  PY: { country: "Paraguay", currency: "PYG", symbol: "₲" },
  SC: { country: "Seychelles", currency: "SCR", symbol: "₨" },
  SB: { country: "Solomon Islands", currency: "SBD", symbol: "$" },
  SD: { country: "Sudan", currency: "SDG", symbol: "£" },
  SM: { country: "San Marino", currency: "EUR", symbol: "€" },
  SR: { country: "Suriname", currency: "SRD", symbol: "$" },

  AF: { country: "Afghanistan", currency: "AFN", symbol: "؋" },
  AX: { country: "Åland Islands", currency: "EUR", symbol: "€" },
  AI: { country: "Anguilla", currency: "XCD", symbol: "$" },
  AQ: { country: "Antarctica", currency: "XCD", symbol: "$" }, // Typically no currency, or various depending on research station
  AS: { country: "American Samoa", currency: "USD", symbol: "$" },
  AW: { country: "Aruba", currency: "AWG", symbol: "ƒ" },
  BY: { country: "Belarus", currency: "BYN", symbol: "Br" },
  BM: { country: "Bermuda", currency: "BMD", symbol: "$" },
  BQ: {
    country: "Bonaire, Sint Eustatius and Saba",
    currency: "USD",
    symbol: "$",
  },
  BV: { country: "Bouvet Island", currency: "NOK", symbol: "kr" }, // Territory of Norway
  CD: {
    country: "Congo, Democratic Republic of the",
    currency: "CDF",
    symbol: "FC",
  },
  CC: { country: "Cocos (Keeling) Islands", currency: "AUD", symbol: "$" },
  CI: { country: "Côte d'Ivoire", currency: "XOF", symbol: "Fr" },
  CX: { country: "Christmas Island", currency: "AUD", symbol: "$" },
  CW: { country: "Curaçao", currency: "ANG", symbol: "ƒ" },
  EH: { country: "Western Sahara", currency: "MAD", symbol: "د.م." }, // Disputed territory, typically uses Moroccan Dirham
  FK: { country: "Falkland Islands (Malvinas)", currency: "FKP", symbol: "£" },
  FO: { country: "Faroe Islands", currency: "DKK", symbol: "kr" },
  GF: { country: "French Guiana", currency: "EUR", symbol: "€" },
  GG: { country: "Guernsey", currency: "GBP", symbol: "£" },
  GP: { country: "Guadeloupe", currency: "EUR", symbol: "€" },
  GQ: { country: "Equatorial Guinea", currency: "XAF", symbol: "FCFA" },
  GS: {
    country: "South Georgia and the South Sandwich Islands",
    currency: "GBP",
    symbol: "£",
  },
  HM: {
    country: "Heard Island and McDonald Islands",
    currency: "AUD",
    symbol: "$",
  },
  HN: { country: "Honduras", currency: "HNL", symbol: "L" },
  IM: { country: "Isle of Man", currency: "GBP", symbol: "£" },
  JE: { country: "Jersey", currency: "GBP", symbol: "£" },
  JM: { country: "Jamaica", currency: "JMD", symbol: "J$" },
  KG: { country: "Kyrgyzstan", currency: "KGS", symbol: "с" },
  KM: { country: "Comoros", currency: "KMF", symbol: "CF" },
  KP: {
    country: "Korea, Democratic People's Republic of",
    currency: "KPW",
    symbol: "₩",
  },
  LV: { country: "Latvia", currency: "EUR", symbol: "€" },
  LB: { country: "Lebanon", currency: "LBP", symbol: "ل.ل" },
  LY: { country: "Libya", currency: "LYD", symbol: "ل.د" },
  MD: { country: "Moldova, Republic of", currency: "MDL", symbol: "L" },
  MP: { country: "Northern Mariana Islands", currency: "USD", symbol: "$" },
  MS: { country: "Montserrat", currency: "XCD", symbol: "$" },
  MU: { country: "Mauritius", currency: "MUR", symbol: "₨" },
  MV: { country: "Maldives", currency: "MVR", symbol: ".ރ" },
  MW: { country: "Malawi", currency: "MWK", symbol: "MK" },
  IE: { country: "Ireland", currency: "EUR", symbol: "€" },
  NF: { country: "Norfolk Island", currency: "AUD", symbol: "$" },
  NU: { country: "Niue", currency: "NZD", symbol: "$" },
  PF: { country: "French Polynesia", currency: "XPF", symbol: "₣" },
  PM: { country: "Saint Pierre and Miquelon", currency: "EUR", symbol: "€" },
  PN: { country: "Pitcairn", currency: "NZD", symbol: "$" },
  PR: { country: "Puerto Rico", currency: "USD", symbol: "$" },
  RE: { country: "Réunion", currency: "EUR", symbol: "€" },
  RS: { country: "Serbia", currency: "RSD", symbol: "дин" },
  SJ: { country: "Svalbard and Jan Mayen", currency: "NOK", symbol: "kr" },
  SL: { country: "Sierra Leone", currency: "SLL", symbol: "Le" },
  SO: { country: "Somalia", currency: "SOS", symbol: "Sh" },
  SS: { country: "South Sudan", currency: "SSP", symbol: "£" },
  ST: { country: "Sao Tome and Principe", currency: "STN", symbol: "Db" }, // Switched from STD to STN
  SX: { country: "Sint Maarten (Dutch part)", currency: "ANG", symbol: "ƒ" },
  SY: { country: "Syrian Arab Republic", currency: "SYP", symbol: "£" },
  TD: { country: "Chad", currency: "XAF", symbol: "FCFA" },
  TF: { country: "French Southern Territories", currency: "EUR", symbol: "€" },
  TG: { country: "Togo", currency: "XOF", symbol: "Fr" },
  TJ: { country: "Tajikistan", currency: "TJS", symbol: "ЅМ" },
  TK: { country: "Tokelau", currency: "NZD", symbol: "$" },
  TL: { country: "Timor-Leste", currency: "USD", symbol: "$" },
  TM: { country: "Turkmenistan", currency: "TMT", symbol: "m" },
  TO: { country: "Tonga", currency: "TOP", symbol: "T$" },
  TT: { country: "Trinidad and Tobago", currency: "TTD", symbol: "TT$" },
  TV: { country: "Tuvalu", currency: "AUD", symbol: "$" },
  TZ: {
    country: "Tanzania, United Republic of",
    currency: "TZS",
    symbol: "TSh",
  },
  UG: { country: "Uganda", currency: "UGX", symbol: "USh" },
  UM: {
    country: "United States Minor Outlying Islands",
    currency: "USD",
    symbol: "$",
  },
  UY: { country: "Uruguay", currency: "UYU", symbol: "$" },
  UZ: { country: "Uzbekistan", currency: "UZS", symbol: "so'm" },
  VA: { country: "Holy See", currency: "EUR", symbol: "€" },
  VC: {
    country: "Saint Vincent and the Grenadines",
    currency: "XCD",
    symbol: "$",
  },
  VE: {
    country: "Venezuela, Bolivarian Republic of",
    currency: "VES",
    symbol: "Bs",
  },
  VG: { country: "Virgin Islands, British", currency: "USD", symbol: "$" },
  VI: { country: "Virgin Islands, U.S.", currency: "USD", symbol: "$" },
  VU: { country: "Vanuatu", currency: "VUV", symbol: "Vt" },
  WF: { country: "Wallis and Futuna", currency: "XPF", symbol: "₣" },
  WS: { country: "Samoa", currency: "WST", symbol: "T" },
  YE: { country: "Yemen", currency: "YER", symbol: "﷼" },
  ZM: { country: "Zambia", currency: "ZMW", symbol: "ZK" },
  ZW: { country: "Zimbabwe", currency: "ZWL", symbol: "$" },
};

export const getCurrencyByIPGeolocation = async () => {
  if (typeof window === "undefined") return null;

  try {
    const response = await fetch("https://ipapi.co/json/"); // Or another reliable free API like https://geolocation-db.com/json/
    const data = await response.json();

    const countryCode = data.country_code; // For ipapi.co, it's country_code; for geolocation-db.com, it's country_code

    if (!countryCode) {
      throw new Error(
        "No country cound found. Please fallback to country selection screen."
      );
    }

    return (
      currencyMap[countryCode] || {
        country: "Unknown",
        currency: "USD",
        symbol: "$",
      }
    );
  } catch (error) {
    console.error("Error fetching IP geolocation:", error);
    return {
      country: "Unknown",
      currency: "USD",
      symbol: "$",
    };
  }
};
